// iepp v2.2 @jon_neal & @aFarkas github.com/aFarkas/iepp
// html5shiv @rem remysharp.com/html5-enabling-script
// Dual licensed under the MIT or GPL Version 2 licenses
/*@cc_on(function(a,b){function s(a){var b=-1;while(++b<f){a.createElement(e[b])}}if(!window.attachEvent||!b.createStyleSheet||!function(){var a=document.createElement("div");a.innerHTML="<elem></elem>";return a.childNodes.length!==1}()){return}a.iepp=a.iepp||{};var c=a.iepp,d=c.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|subline|summary|time|video",e=d.split("|"),f=e.length,g=new RegExp("(^|\\s)("+d+")","gi"),h=new RegExp("<(/*)("+d+")","gi"),i=/^\s*[\{\}]\s*$/,j=new RegExp("(^|[^\\n]*?\\s)("+d+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),k=/@media +(?![Print|All])[^{]+\{([^{}]+\{[^{}]+\})+[^}]+\}/g,l=b.createDocumentFragment(),m=b.documentElement,n=b.getElementsByTagName("script")[0].parentNode,o=b.createElement("body"),p=b.createElement("style"),q=/print|all/,r;c.getCSS=function(a,b){try{if(a+""===undefined){return""}}catch(d){return""}var e=-1,f=a.length,g,h,i=[];while(++e<f){g=a[e];if(g.disabled){continue}b=g.media||b;if(q.test(b)){h=g.cssText;if(b!="print"){h=h.replace(k,"")}i.push(c.getCSS(g.imports,b),h)}b="all"}return i.join("")};c.parseCSS=function(a){var b=[],c;while((c=j.exec(a))!=null){b.push(((i.exec(c[1])?"\n":c[1])+c[2]+c[3]).replace(g,"$1.iepp-$2")+c[4])}return b.join("\n")};c.writeHTML=function(){var a=-1;r=r||b.body;while(++a<f){var c=b.getElementsByTagName(e[a]),d=c.length,g=-1;while(++g<d){if(c[g].className.indexOf("iepp-")<0){c[g].className+=" iepp-"+e[a]}}}l.appendChild(r);m.appendChild(o);o.className=r.className;o.id=r.id;o.innerHTML=r.innerHTML.replace(h,"<$1font")};c._beforePrint=function(){if(c.disablePP){return}p.styleSheet.cssText=c.parseCSS(c.getCSS(b.styleSheets,"all"));c.writeHTML()};c.restoreHTML=function(){if(c.disablePP){return}o.swapNode(r)};c._afterPrint=function(){c.restoreHTML();p.styleSheet.cssText=""};s(b);s(l);if(c.disablePP){return}n.insertBefore(p,n.firstChild);p.media="print";p.className="iepp-printshim";a.attachEvent("onbeforeprint",c._beforePrint);a.attachEvent("onafterprint",c._afterPrint)})(this,document)@*/
// http://bit.ly/ishiv | WTFPL (and now GPL) License
window.innerShiv=function(){function h(c,e,b){return/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i.test(b)?c:e+"></"+b+">"}var c,e=document,j,g="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" ");return function(d,i){if(!c&&(c=e.createElement("div"),c.innerHTML="<nav></nav>",j=c.childNodes.length!==1)){for(var b=e.createDocumentFragment(),f=g.length;f--;)b.createElement(g[f]);b.appendChild(c)}d=d.replace(/^\s\s*/,"").replace(/\s\s*$/,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/(<([\w:]+)[^>]*?)\/>/g,h);c.innerHTML=(b=d.match(/^<(tbody|tr|td|col|colgroup|thead|tfoot)/i))?"<table>"+d+"</table>":d;b=b?c.getElementsByTagName(b[1])[0].parentNode:c;if(i===!1)return b.childNodes;for(var f=e.createDocumentFragment(),k=b.childNodes.length;k--;)f.appendChild(b.firstChild);return f}}();
// Monkeypatch the innerShiv in the ajax insert method.
(function(){if(Drupal.ajax){var _insert=Drupal.ajax.prototype.commands.insert;Drupal.ajax.prototype.commands.insert=function(ajax,response,status){response.data=innerShiv(response.data,false);_insert(ajax,response,status);}}})();
